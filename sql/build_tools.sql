SELECT
  crm.repo_id,
  crm.host_name,
  crm.project_key,
  crm.repo_slug,
  crm.clone_url_ssh,
  crm.status,
  crm.comment,
  crm.component_id,
  crm.tc,
  crm.app_id,
  crm.web_url,
  crm.executable_lines_of_code,
  crm.avg_cyclomatic_complexity,
  crm.total_token_count,
  crm.function_count,
  crm.total_cyclomatic_complexity,
  crm.source_code_file_count,
  crm.total_blank,
  crm.total_comment,
  crm.total_lines_of_code,
  crm.iac_ansible,
  crm.iac_azure_pipelines,
  crm.iac_bitbucket_pipelines,
  crm.iac_circleci_pipelines,
  crm.iac_cloudformation,
  crm.iac_dockerfile,
  crm.iac_github_actions,
  crm.iac_gitlab_ci,
  crm.iac_kubernetes,
  crm.iac_no_checks,
  crm.iac_openapi,
  crm.iac_secrets,
  crm.iac_terraform,
  crm.iac_terraform_plan,
  crm.total_trivy_vulns,
  crm.trivy_critical,
  crm.trivy_high,
  crm.trivy_medium,
  crm.trivy_low,
  crm.total_semgrep_findings,
  crm.cat_best_practice,
  crm.cat_compatibility,
  crm.cat_correctness,
  crm.cat_maintainability,
  crm.cat_performance,
  crm.cat_portability,
  crm.cat_security,
  crm.language_count,
  crm.main_language,
  crm.all_languages,
  crm.repo_size_bytes,
  crm.file_count,
  crm.total_commits,
  crm.number_of_contributors,
  crm.activity_status,
  crm.last_commit_date,
  crm.repo_age_days,
  crm.active_branch_count,
  crm.updated_at,
  crm.classification_label,
  btr.id AS build_tools_id,
  btr.repo_id AS build_tools_repo_id,
  btr.tool AS build_tool,
  btr.tool_version,
  btr.runtime_version
FROM
  public.combined_repo_metrics crm
  LEFT JOIN public.build_tools btr ON crm.repo_id = btr.repo_id
